<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Graphite Data Types Model">
<meta name="keywords" content="EHR, clinical, data types, Graphite">
<title>Data Types Model</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
<link rel="stylesheet" href="https://specifications.openehr.org/styles/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_data_types_model">Data Types Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_prior_art">Prior Art</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
</ul>
</li>
<li><a href="#_introduction">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#_class_descriptions">2.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_data_value_class">2.2.1. Data_value Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_miscellaneous_types">3. Miscellaneous Types</a>
<ul class="sectlevel2">
<li><a href="#_boolean_values">3.1. Boolean Values</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_2">3.1.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_boolean_value_class">3.1.1.1. Boolean_value Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_real_world_identifier_references">3.2. Real World Identifier References</a>
<ul class="sectlevel3">
<li><a href="#_requirements">3.2.1. Requirements</a></li>
<li><a href="#_semantics">3.2.2. Semantics</a></li>
<li><a href="#_class_descriptions_3">3.2.3. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_rwe_id_ref_class">3.2.3.1. Rwe_id_ref Class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_text_package">4. Text Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_requirements_2">4.2. Requirements</a>
<ul class="sectlevel3">
<li><a href="#_plain_text">4.2.1. Plain Text</a></li>
<li><a href="#_coded_terms">4.2.2. Coded Terms</a>
<ul class="sectlevel4">
<li><a href="#_basic_requirements">4.2.2.1. Basic Requirements</a></li>
<li><a href="#_post_coordinated_terms">4.2.2.2. Post-coordinated Terms</a></li>
<li><a href="#_preferred_terms">4.2.2.3. Preferred Terms</a></li>
</ul>
</li>
<li><a href="#_text_formatting">4.2.3. Text Formatting</a></li>
</ul>
</li>
<li><a href="#_design">4.3. Design</a>
<ul class="sectlevel3">
<li><a href="#_overview_3">4.3.1. Overview</a></li>
<li><a href="#_negation">4.3.2. Negation</a></li>
<li><a href="#_representation_of_meaning_modifying_terms">4.3.3. Representation of Meaning-Modifying Terms</a></li>
<li><a href="#_mappings">4.3.4. Mappings</a>
<ul class="sectlevel4">
<li><a href="#_classification_broader_terms">4.3.4.1. Classification (Broader Terms)</a></li>
<li><a href="#_equivalent_synonymous_terms">4.3.4.2. Equivalent / Synonymous Terms</a></li>
<li><a href="#_post_hoc_coding_of_narrative">4.3.4.3. Post hoc Coding of Narrative</a></li>
<li><a href="#_more_specific_mappings_narrower_terms">4.3.4.4. More Specific Mappings (Narrower Terms)</a></li>
<li><a href="#_the_unified_medical_language_system_umls">4.3.4.5. The Unified Medical Language System (UMLS)</a></li>
<li><a href="#_legacy_mapping_scenarios">4.3.4.6. Legacy Mapping Scenarios</a></li>
</ul>
</li>
<li><a href="#_formatting_and_hyperlinking">4.3.5. Formatting and Hyperlinking</a>
<ul class="sectlevel4">
<li><a href="#_usage_in_plain_text_instances">4.3.5.1. Usage in Plain_text Instances</a></li>
<li><a href="#_usage_in_coded_text_instances">4.3.5.2. Usage in Coded_text Instances</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_4">4.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_text_class">4.4.1. Text Class</a></li>
<li><a href="#_plain_text_class">4.4.2. Plain_text Class</a></li>
<li><a href="#_text_format_types_enumeration">4.4.3. Text_format_types Enumeration</a></li>
<li><a href="#_coded_text_class">4.4.4. Coded_text Class</a></li>
<li><a href="#_term_mapping_class">4.4.5. Term_mapping Class</a></li>
<li><a href="#_term_mapping_match_enumeration">4.4.6. Term_mapping_match Enumeration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ordered_package_quantities">5. Ordered Package: Quantities</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">5.1. Overview</a></li>
<li><a href="#_requirements_3">5.2. Requirements</a>
<ul class="sectlevel3">
<li><a href="#_stated_versus_observed_values">5.2.1. Stated Versus Observed Values</a></li>
<li><a href="#_dimensioned_quantities">5.2.2. Dimensioned Quantities</a></li>
<li><a href="#_ratios_and_proportions">5.2.3. Ratios and Proportions</a></li>
<li><a href="#_formulations">5.2.4. Formulations</a></li>
<li><a href="#_quantity_ranges">5.2.5. Quantity Ranges</a></li>
<li><a href="#_reference_ranges">5.2.6. Reference Ranges</a></li>
<li><a href="#_normal_range_and_status_in_laboratory_data">5.2.7. Normal Range and Status in Laboratory data</a></li>
<li><a href="#_scores_and_scales">5.2.8. Scores and Scales</a></li>
<li><a href="#_countable_things">5.2.9. Countable Things</a></li>
</ul>
</li>
<li><a href="#_design_2">5.3. Design</a>
<ul class="sectlevel3">
<li><a href="#_basic_semantics">5.3.1. Basic Semantics</a></li>
<li><a href="#_measured_values">5.3.2. Measured Values</a></li>
<li><a href="#_quantity_ranges_2">5.3.3. Quantity Ranges</a></li>
<li><a href="#_proportions">5.3.4. Proportions</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_5">5.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_ordinal_class">5.4.1. Ordinal Class</a></li>
<li><a href="#_quantified_class">5.4.2. Quantified Class</a></li>
<li><a href="#_quantity_class">5.4.3. Quantity Class</a></li>
<li><a href="#_count_class">5.4.4. Count Class</a></li>
<li><a href="#_ratio_class">5.4.5. Ratio Class</a></li>
<li><a href="#_ratio_kind_enumeration">5.4.6. Ratio_kind Enumeration</a></li>
<li><a href="#_measured_class">5.4.7. Measured Class</a></li>
<li><a href="#_reference_range_class">5.4.8. Reference_range Class</a></li>
<li><a href="#_comparison_operator_enumeration">5.4.9. Comparison_operator Enumeration</a></li>
<li><a href="#_range_class">5.4.10. Range Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes">5.5. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_units_syntax">5.5.1. Units Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ordered_package_temporal">6. Ordered Package: Temporal</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">6.1. Overview</a></li>
<li><a href="#_class_descriptions_6">6.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_temporal_value_class">6.2.1. Temporal_value Class</a></li>
<li><a href="#_date_value_class">6.2.2. Date_value Class</a></li>
<li><a href="#_time_value_class">6.2.3. Time_value Class</a></li>
<li><a href="#_date_time_value_class">6.2.4. Date_time_value Class</a></li>
<li><a href="#_duration_value_class">6.2.5. Duration_value Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_timing">7. Timing</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">7.1. Overview</a></li>
<li><a href="#_requirements_4">7.2. Requirements</a></li>
<li><a href="#_semantics_2">7.3. Semantics</a></li>
<li><a href="#_class_descriptions_7">7.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_timing_class">7.4.1. Timing Class</a></li>
<li><a href="#_occurrence_class">7.4.2. Occurrence Class</a></li>
<li><a href="#_occurrence_pattern_class">7.4.3. Occurrence_pattern Class</a></li>
<li><a href="#_time_specifier_class">7.4.4. Time_specifier Class</a></li>
<li><a href="#_period_specifier_class">7.4.5. Period_specifier Class</a></li>
<li><a href="#_day_specifier_class">7.4.6. Day_specifier Class</a></li>
<li><a href="#_hour_specifier_class">7.4.7. Hour_specifier Class</a></li>
<li><a href="#_clock_time_class">7.4.8. Clock_time Class</a></li>
<li><a href="#_customary_time_class">7.4.9. Customary_time Class</a></li>
<li><a href="#_temporal_relation_enumeration">7.4.10. Temporal_relation Enumeration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_encapsulated_package">8. Encapsulated Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">8.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_5">8.1.1. Requirements</a></li>
<li><a href="#_design_3">8.1.2. Design</a></li>
<li><a href="#_examples">8.1.3. Examples</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_8">8.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_encapsulated_class">8.2.1. Encapsulated Class</a></li>
<li><a href="#_multimedia_class">8.2.2. Multimedia Class</a></li>
<li><a href="#_parsable_class">8.2.3. Parsable Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_uri_package">9. Uri Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_8">9.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_6">9.1.1. Requirements</a></li>
<li><a href="#_design_4">9.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_definitions">9.2. Definitions</a></li>
<li><a href="#_class_descriptions_9">9.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_uri_ref_class">9.3.1. Uri_ref Class</a></li>
<li><a href="#_ehr_uri_ref_class">9.3.2. Ehr_uri_ref Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_2">9.4. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_dv_ehr_uri_syntax">9.4.1. DV_EHR_URI Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_implementation_strategies">10. Implementation Strategies</a>
<ul class="sectlevel2">
<li><a href="#_overview_9">10.1. Overview</a></li>
<li><a href="#_quantities_and_ordered_numeric">10.2. Quantities and Ordered_numeric</a></li>
<li><a href="#_unicode">10.3. Unicode</a></li>
<li><a href="#_dates_and_times">10.4. Dates and Times</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://uploads-ssl.webflow.com/63570cd7d4eda80d654ccf14/64027a592d749e7df28c6248_primary-graphite.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_data_types_model" class="sect0"><a class="anchor" href="#_data_types_model"></a>Data Types Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platform Community</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: BASE latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, clinical, data types, Graphite</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2023 Graphite Platform Publishing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platforms</a> is an independent, non-profit foundation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.graphitehealth.io/components/BASE/open_issues" target="_blank" rel="noopener">Report an Issue</a><br>
 Web: <a href="https://specifications.graphitehealth.io" target="_blank" rel="noopener">specifications.GraphiteHealth.io</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser, Implementer</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing: based on openEHR and HL7 FHIR Data types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>10 Apr 2023</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prior_art"><a class="anchor" href="#_prior_art"></a>Prior Art</h3>
<div class="paragraph">
<p>This specification draws from the  <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">openEHR Data Types</a> specification and the <a href="http://build.fhir.org/datatypes.html" target="_blank" rel="noopener">HL7 FHIR Data Types</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a registered trademark of the openEHR Foundation</p>
</li>
<li>
<p>'FHIR' is a registered trademark of HL7 International</p>
</li>
<li>
<p>'Graphite Health' is a registered trademark of the Graphite Health</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' and '.Net' are registered trademarks of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the Graphite Data Types Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes implementers, integrators and health data managers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.graphitehealth.io/releases/BASE/latest/architecture_overview.html" target="_blank" rel="noopener">openEHR Architecture Overview</a>;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="https://specifications.graphitehealth.io/releases/BASE/latest/data_types.html" target="_blank" rel="noopener">https://specifications.graphitehealth.io/releases/BASE/latest/data_types.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://specifications.graphitehealth.io" target="_blank" rel="noopener">Graphite forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.graphitehealth.io/components/BASE/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.graphitehealth.io/components/BASE/history" target="_blank" rel="noopener">BASE component Change Request tracker</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>2. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>2.1. Overview</h3>
<div class="paragraph">
<p>This specification describes a set of types suitable for use in scientific, clinical and related kinds of data. In order for such types to be defined, a set of primitive types is assumed, namely <code>Integer</code>, <code>Real</code>, <code>Boolean</code>, <code>Character</code>, <code>Octet</code>, <code>String</code>, <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>, and <code>Array&lt;T&gt;</code>. These have standard definitions in the UML meta-model and in the type systems of most programming languages. The exact assumptions are described in the {graphite_foundation_types}[Graphite Foundation Types^].</p>
</div>
<div class="paragraph">
<p>The data types described here inherit from the class <code>Data_value</code>. They have two distinct uses in reference models. Firstly, they may be used as 'data values' in reference model structures wherever the <code>Data_value</code> class appears. Additionally, specific subtypes of the data types described here can also be used as attribute types in other classes in reference models, such as date/times, coded terms and so on. The difference is that in the former case, only subtypes of <code>Data_value</code> may be used, whilst in the latter case, other types may be used as well, from the assumed set of basic types.</p>
</div>
<div class="paragraph">
<p>Over and above the need to satisfy the functional requirements of clinical data, three concerns have driven the design of the Graphite data types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>clarity of expression</p>
</li>
<li>
<p>ease of implementation</p>
</li>
<li>
<p>interoperability with data types from other standards</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Accordingly, the types defined here have been derived from the <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">Graphite Data Types</a> and the <a href="http://build.fhir.org/datatypes.html" target="_blank" rel="noopener">HL7 FHIR Data Types</a>.</p>
</div>
<div class="paragraph">
<p>The <code>data_types</code> package is illustrated below.</p>
</div>
<div id="data_types" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.svg" alt="BASE data types">
</div>
<div class="title">Figure 1. base.data_types package</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>2.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_data_value_class"><a class="anchor" href="#_data_value_class"></a>2.2.1. Data_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Data_value (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of all <code>Dv_</code> data value types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_miscellaneous_types"><a class="anchor" href="#_miscellaneous_types"></a>3. Miscellaneous Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_boolean_values"><a class="anchor" href="#_boolean_values"></a>3.1. Boolean Values</h3>
<div class="paragraph">
<p>One of the most basic types of data is boolean data.</p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>3.1.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_boolean_value_class"><a class="anchor" href="#_boolean_value_class"></a>3.1.1.1. Boolean_value Class</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Boolean_value</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Items which are truly boolean data, such as true/false or yes/no answers.</p>
</div>
<div class="paragraph">
<p>Misuse: <code>Dv_boolean</code> should not be used as a replacement for naively modelled enumerated types such as male/female etc. Such values should be coded, and in any case the enumeration often has more than two values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value of this item. Actual values may be language or implementation dependent.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_real_world_identifier_references"><a class="anchor" href="#_real_world_identifier_references"></a>3.2. Real World Identifier References</h3>
<div class="sect3">
<h4 id="_requirements"><a class="anchor" href="#_requirements"></a>3.2.1. Requirements</h4>
<div class="paragraph">
<p>Real world entities (RWEs) such as people, car engines, invoices, and appointments may all be assigned identifiers. In general, while some real world identifiers (RWIs) are 1:1 with their referent entities, none can be guaranteed so. Therefore, from a strict computational point of view, RWIs are not treated as reliable identifiers, but as <em>attributes</em> of their owning objects, in the same ways as names and addresses for example.</p>
</div>
<div class="paragraph">
<p>Examples of RWE identifiers that are intended to be unique within the space of the issuing authority or organisation include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>driver&#8217;s licence id</p>
</li>
<li>
<p>social security number</p>
</li>
<li>
<p>passport number</p>
</li>
<li>
<p>prescription id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The defining logical characteristic of RWIs is that they continue to identify the entities in question, regardless of how the latter change in time; for example a social security number does not change when someone changes his or her hair colour or address. In general it should be the case that if two RWIs are equal, they refer to the same RWE.</p>
</div>
</div>
<div class="sect3">
<h4 id="_semantics"><a class="anchor" href="#_semantics"></a>3.2.2. Semantics</h4>
<div class="paragraph">
<p>The model defined in the <code>Rwe_id_ref</code> class allows the recording of three things as part of identifying an item of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier given to the item of interest (mandatory).</p>
</li>
<li>
<p>the issuing authority of the kind of id used (e.g. it might be the federal department of health) (optional);</p>
</li>
<li>
<p>the assigner of the id to the item being identified. This is usually the organisation which created the item being identified (optional);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, a type of item being identified can also be recorded, such as 'driver&#8217;s licence' or 'Medicare card'. All fields are text fields, rather than coded, as no definitive vocabularies are available. However, some useful sources of terms exists, such as <a href="https://www.hl7.org/fhir/v2/0203/index.html" target="_blank" rel="noopener">HL7v2 Table 0203</a> for the <code>type</code> field. If using the latter, it is recommended to use the 'description', not the code.</p>
</div>
<div class="paragraph">
<p>Only the <code>identifier</code> field is mandatory to allow for use cases in which the other fields cannot be populated. However it is strongly recommended to populate the <code>type</code> and <code>issuer</code> fields where possible. In many cases the <code>issuer</code> and <code>assigner</code> have the same value, however two fields allow for the situation in which a central issuer provides blocks of identifiers (typically on some kind of form or other paperwork) to other organisations who then assign them to individuals, as is often done with prescription identifiers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>3.2.3. Class Descriptions</h4>
<div class="sect4">
<h5 id="_rwe_id_ref_class"><a class="anchor" href="#_rwe_id_ref_class"></a>3.2.3.1. Rwe_id_ref Class</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Rwe_id_ref</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Type for representing a reference to a real world entity, with an identifier, and other meta-data indicating the type of entity, issuer of the identifier and its assigner.</p>
</div>
<div class="paragraph">
<p>Misuse: <code>Rwe_id_ref</code> is not used to express identifiers generated by the infrastructure to refer to information items; the types <code>Object_id</code> and `Object_ref`and subtypes are defined for this purpose.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>issuer</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional authority which issues the kind of id used in the id field of this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assigner</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional organisation that assigned the id to the item being identified.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The identifier value. Often structured, according to the definition of the issuing authority&#8217;s rules.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional identifier type, such as  prescription , or  Social Security Number . One day a controlled vocabulary might be possible for this.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Id_valid</em>: <code>not id.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_text_package"><a class="anchor" href="#_text_package"></a>4. Text Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>base.data_types.text</code> package contains classes for representing textual data in the health record, including plain text with or without formatting and coded terms. It is illustrated below.</p>
</div>
<div id="base_data_types_text" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.text.svg" alt="BASE data types.text">
</div>
<div class="title">Figure 2. base.data_types.text package</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_2"><a class="anchor" href="#_requirements_2"></a>4.2. Requirements</h3>
<div class="paragraph">
<p>The sections below describe the requirements of text data types.</p>
</div>
<div class="sect3">
<h4 id="_plain_text"><a class="anchor" href="#_plain_text"></a>4.2.1. Plain Text</h4>
<div class="paragraph">
<p>Plain text items are used in clinical data in a number of cases, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>recording of narrative statements, e.g. visual observations, image interpretations;</p>
</li>
<li>
<p>recording of patient responses, including quantities or dates not deemed sufficiently precise to be represented using structured quantitative or date/time date types;</p>
</li>
<li>
<p>recording of values that would normally be coded, but for which no terminology is available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Plain text items may contain formatting, and may also have mappings to one or more terminology codes for various purposes, including reimbursement and research.</p>
</div>
</div>
<div class="sect3">
<h4 id="_coded_terms"><a class="anchor" href="#_coded_terms"></a>4.2.2. Coded Terms</h4>
<div class="sect4">
<h5 id="_basic_requirements"><a class="anchor" href="#_basic_requirements"></a>4.2.2.1. Basic Requirements</h5>
<div class="paragraph">
<p>Coded terms from controlled terminologies are used in the health record to enable machine processing of the data, via:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>naming</em>: to identify the kind of entity that a statement is about, i.e. the target of the 'is-about' relation; this may include:</p>
<div class="ulist">
<ul>
<li>
<p>independent entities, such as a person or organ;</p>
</li>
<li>
<p>dependent entities such as a quality, e.g. blood pressure;</p>
</li>
<li>
<p>relational entities, such as a patient&#8217;s participation in a physiotherapy programme;</p>
</li>
<li>
<p>other informational entities, e.g. previous utterances of the patient;</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>description</em>: to describe a state or event, e.g. state that an intestinal infection is <em>listeria monocytogenes</em>, or that the patient has supra-ventricular tachycardia;</p>
</li>
<li>
<p><em>classification</em>: to classify something into a specific category, e.g. to classify a specific procedure into a billing category;</p>
</li>
<li>
<p><em>inferencing</em>: to determine if one item, e.g. a diagnosis of gestational diabetes, is included in a more general category, e.g. diabetes;</p>
</li>
<li>
<p><em>translation</em>: codes may be rendered with a text value in a different language, if the terminology supports it i.e. if the requisite translation exists.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first two categories may be broadly understood as 'names and values' of things. Values are normally drawn from <em>value-sets</em>, which are specific subsets of a terminology.</p>
</div>
<div class="paragraph">
<p>Classification is typically in the form of <em>additional</em> code(s) to a descriptive code, leading to a requirement for record code <em>mappings</em> for an initial code or text item. For example, a procedure may be coded locally as snomed_ct::10761101000119105|Vacuum assisted vaginal delivery|, but for billing purposes, with ICD11::JB20|Single spontaneous delivery|. The latter code would be added as a mapping of the former for the purpose of 'reimbursement'.</p>
</div>
<div class="paragraph">
<p>An overriding requirement for coded entities in the data are that they are independently intelligible, without resolution via a terminology service (which might not be available). Concretely this requires the term rubric (textual value) to be stored alongside the code.</p>
</div>
</div>
<div class="sect4">
<h5 id="_post_coordinated_terms"><a class="anchor" href="#_post_coordinated_terms"></a>4.2.2.2. Post-coordinated Terms</h5>
<div class="paragraph">
<p>This specification assumes the possibility of <em>post-coordinated</em> term expressions, which are constructed from primitive codes and an expression grammar. SNOMED CT for example {https://confluence.ihtsdotools.org/display}/DOCSCG/Compositional+Grammar+-+Specification+and+Guide[supports expressions^] such as <code>125605004 |fracture of bone| : 363698007 |finding site|  =  71341001 |bone structure of femur|</code>, which is a post-coordinated equivalent for <code>71620000|fracture of femur|</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_preferred_terms"><a class="anchor" href="#_preferred_terms"></a>4.2.2.3. Preferred Terms</h5>
<div class="paragraph">
<p>In cases where Graphite data is used to represent data originally represented in other formats, one common requirement is to be able to represent both the term chosen by the user at data capture time, and also the corresponding <em>preferred term</em>, if the two are different. This allows both the user&#8217;s specific choice and the standard text to be captured.</p>
</div>
<div class="paragraph">
<p>Secondly, where term mappings are represented it is useful to be able to capture not just the code or code-phrase of the mapped term, but the preferred term or expression text, in order to make the mapped term self-standing in the data.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_text_formatting"><a class="anchor" href="#_text_formatting"></a>4.2.3. Text Formatting</h4>
<div class="paragraph">
<p>This specification assumes that the authors of narrative text content expect to be able to create longer tracts of text that may include paragraphs, bolding, bullet lists and other typical structures, as well as simple atoms of text containing bolding and so on.</p>
</div>
<div class="paragraph">
<p>It is assumed that the text associated with a coded term may include minimal formatting, i.e. a link and/or emphasis, but is devoid of other formatting or newlines.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design"><a class="anchor" href="#_design"></a>4.3. Design</h3>
<div class="sect3">
<h4 id="_overview_3"><a class="anchor" href="#_overview_3"></a>4.3.1. Overview</h4>
<div class="paragraph">
<p>All atomic text items are either instances of the type <code>Plain_text</code> or of <code>Coded_text</code>. Within archetyped structures, the parent type <code>Text</code> should be used wherever a coded or non-coded text item is allowed; <code>Coded_text</code> should be used wherever a text item must be coded, and <code>Plain_text</code> to force non-coded text. The <code>Text</code> type supports optional formatting and hyperlinking (see <a href="#_formatting_and_hyperlinking">Section 4.3.5</a> below). The class <code>Coded_text</code> captures the association of two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the code of a term known in the terminology service, recorded in the <code><em>concept</em></code> attribute of type <code>Terminology_code</code>;</p>
</li>
<li>
<p>the text rubric of the term, recorded in the <code><em>value</em></code> attribute (inherited from <code>Text</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The attribute <code>Terminology_code.<em>code_string</em></code> records a term code or post-coordinated code expression which may be used as an argument to a retrieval function in the terminology service to obtain the definition of the term or expression.</p>
</div>
<div class="paragraph">
<p>The model of <code>Coded_text</code> is designed to capture the <em>actual</em> term chosen by the user or software at runtime, i.e. preferred term or synonym (for terminologies supporting synonyms), or a post-coordination of underlying distinct terms if an expression was chosen as the term (such as an expression supported by SNOMED CT). If the user makes any modification to the text value during data entry, a <code>Plain_text</code> object and associated mapping (see <a href="#_mappings">Section 4.3.4</a>) must be used instead.</p>
</div>
</div>
<div class="sect3">
<h4 id="_negation"><a class="anchor" href="#_negation"></a>4.3.2. Negation</h4>
<div class="paragraph">
<p>Negation is not supported as an additional Boolean property within a Coded text as in some models. It may be safely represented in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>via a pre-coordinated term that includes negation, e.g <code>snomed_ct::409137002|No known drug allergy|</code>, if available;</p>
</li>
<li>
<p>via a higher order structure such as a clinical statement on 'exclusions' that lists conditions or diagnoses that have been excluded (e.g. via testing).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_representation_of_meaning_modifying_terms"><a class="anchor" href="#_representation_of_meaning_modifying_terms"></a>4.3.3. Representation of Meaning-Modifying Terms</h4>
<div class="paragraph">
<p>Meaning-modifying compound terms such as 'family history of breast cancer' and 'antibiotic prophylaxis recommended' may be represented in at least three ways as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>via pre-coordinated terms, e.g. <code>snomed_ct::275937001|family history of cancer|</code>, if available;</p>
</li>
<li>
<p>via a post-coordinated expression, e.g. <code>281666001 |family history of disorder| : 246090004 |associated finding| = 22298006 |myocardial infarction|</code>;</p>
</li>
<li>
<p>via the use of separate terms within a larger structure, for example a clinical statement on 'family history' that lists key diagnoses (such as 'breast cancer') for specific family members.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The model described here may be used to implement all of these.</p>
</div>
<div class="paragraph">
<p>TODO: specific guidance, e.g. avoid complex post-coordination expressions?</p>
</div>
</div>
<div class="sect3">
<h4 id="_mappings"><a class="anchor" href="#_mappings"></a>4.3.4. Mappings</h4>
<div class="sect4">
<h5 id="_classification_broader_terms"><a class="anchor" href="#_classification_broader_terms"></a>4.3.4.1. Classification (Broader Terms)</h5>
<div class="paragraph">
<p>Any text item, whether coded or not, may be classified with a coded term, for research, reporting or decision support purposes. For example, a GP working in tropical Australia may wish to write "Ross River infection", and be working with ICD9, which does not contain this term (although ICD9-CM does). He or she will use a plain text item, but will still be able to map it to an ICD9 classifier, such as the code for 'arbovirus infection NOS'. The same approach can be used for adding a classifying term to a coded text item.</p>
</div>
<div class="paragraph">
<p>Classifying mappings are represented by adding a term to the mappings list of the original term. Each mapping is explicitly represented with an instance of <code>Term_mapping</code>, which indicates both the term being associated with the original text item, and a value of '&gt;' for the match attribute, which indicates that the mapping is 'broader'. The possible values of the match attribute are '&gt;' (broader), '&lt;' (narrower), and '=' (equivalent); they are taken from the ISO standards <a href="https://www.iso.org/standard/7776.html" target="_blank" rel="noopener">ISO 2788 - Guide to Establishment and development of monolingual thesauri</a> and <a href="https://www.iso.org/standard/12159.html" target="_blank" rel="noopener">ISO 5964 - Guide to Establishment and development of multilingual thesauri</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_equivalent_synonymous_terms"><a class="anchor" href="#_equivalent_synonymous_terms"></a>4.3.4.2. Equivalent / Synonymous Terms</h5>
<div class="paragraph">
<p>Data from pathology laboratories has often been coded using a terminology local to the laboratory, due to lack of or economic infeasibility of using existing widespread terminologies for the job. However, some laboratories also supply a nearest equivalent code from a well-known terminology such as <a href="http://loinc.org">LOINC</a>, to enable the receiver of the data to process it in a more standard fashion. Here, 'equivalence' is taken to mean a term of the same meaning but from a different vocabulary.</p>
</div>
</div>
<div class="sect4">
<h5 id="_post_hoc_coding_of_narrative"><a class="anchor" href="#_post_hoc_coding_of_narrative"></a>4.3.4.3. Post hoc Coding of Narrative</h5>
<div class="paragraph">
<p>Mappings may be used to capture equivalent terms for tracts of narrative text, generated via natural language processing (NLP). In this case, the value of the <code><em>match</em></code> attribute is '=', indicating that the mapping is a synonym, and the <code><em>purpose</em></code> set to "NLP extraction" or similar.</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_specific_mappings_narrower_terms"><a class="anchor" href="#_more_specific_mappings_narrower_terms"></a>4.3.4.4. More Specific Mappings (Narrower Terms)</h5>
<div class="paragraph">
<p>Occasionally, there is a need to create a mapping to a term of narrower meaning than the original text item. Circumstances in which this occurs include when a clinician wants to record a syndrome such as 'croup' or 'influenza', but the terminology does not contain these general terms, although it does contain more specific terms, e.g. 'viral laryngo-tracheitis' or 'influenza type A'. Clearly the clinician
should be allowed to record what she wants (as plain text if necessary), but it should also be possible to add a mapping to the more precise term. For mappings to narrower terms, the value of the match attribute is '&lt;'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_unified_medical_language_system_umls"><a class="anchor" href="#_the_unified_medical_language_system_umls"></a>4.3.4.5. The Unified Medical Language System (UMLS)</h5>
<div class="paragraph">
<p>TODO: check this section for Graphite 2023</p>
</div>
<div class="paragraph">
<p>UMLS reference terms could potentially be supplied with instances of coded terms, in the form of the UMLS concept unique identifier, or 'CUI'. UMLS is a way of encoding terms developed at the National Library of Medicine in the United States, and consists of a meta-thesaurus, in which terms from any extant term set (such as <a href="http://www.who.int/classifications/icd/en/" target="_blank" rel="noopener">ICDx</a>, <a href="http://www.snomed.org" target="_blank" rel="noopener">SNOMED CT</a>, READ) can be cross-referenced.</p>
</div>
</div>
<div class="sect4">
<h5 id="_legacy_mapping_scenarios"><a class="anchor" href="#_legacy_mapping_scenarios"></a>4.3.4.6. Legacy Mapping Scenarios</h5>
<div class="paragraph">
<p>In cases where legacy data has to be converted to Graphite-compliant data, and only codes are available, e.g. ICD or ICPC codes, the following approach is recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a new <code>Plain_text</code> instance whose <code><em>value</em></code> is "(not available)"</p>
</li>
<li>
<p>add a mapping to the <code>Text</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>purpose</em></code> = <code>"legacy conversion"</code></p>
</li>
<li>
<p><code><em>match</em></code> = <code>"="</code></p>
</li>
<li>
<p><code><em>target</em></code> = <code>Terminology_code</code> object whose <code><em>code_string</em></code> and <code><em>terminology_id</em></code> are set to correspond to the available code in the legacy data.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This expresses the reality that no text was ever recorded in the legacy system; rather a code was recorded directly in the data field. In the converted data, this code is more correctly considered a mapping.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_formatting_and_hyperlinking"><a class="anchor" href="#_formatting_and_hyperlinking"></a>4.3.5. Formatting and Hyperlinking</h4>
<div class="paragraph">
<p>Formatting of the text in the <code><em>value</em></code> field of <code>Text</code>  instances is indicated via the optional <code><em>formatting</em></code> attribute. This may be used to control the use of newlines and general text formatting, for which mark-down is supported.</p>
</div>
<div class="paragraph">
<p>The <code><em>formatting</em></code> attribute may contain one of the following values, with the associated meaning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Void</code>:  if no value is supplied, no formatting marks are assumed to exist in the text, other than newlines, and it may safely be passed in a 'straight-through' fashion to a display device with no further processing, if desired;</p>
</li>
<li>
<p><code>"markdown"</code>: the text is assumed to be markdown format, strongly recommended use of the <a href="https://spec.commonmark.org/" target="_blank" rel="noopener">CommonMark</a> form of markdown, and should preferably be rendered via conversion to HTML in the usual way, but <em>may</em> be passed straight through to display if unavoidable, since markdown is acceptably human-readable;</p>
</li>
<li>
<p><code>"plain"</code>: the text is treated as in the unformatted (<code>Void</code>) case above (newlines are allowed); this option is used to enable archetype-based modelling tools to clearly require a text object to be unformatted;</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: as for the plain case, but newlines are not allowed - the text is a simple 'atom'.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not all CommonMark features are allowed in the <code><em>value</em></code> field, if it contains markdown. The following should not be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML 'blocks';</p>
</li>
<li>
<p>raw HTML;</p>
</li>
<li>
<p>images - these may be included in Graphite content via the <code>Multimedia</code> types.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_usage_in_plain_text_instances"><a class="anchor" href="#_usage_in_plain_text_instances"></a>4.3.5.1. Usage in Plain_text Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>Plain_text</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom'<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain_no_newlines"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom' with a hyperlink<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text paragraphs,<br>
 no other formatting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string with newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formatted text with paragraphs, bolding, italics, bullet lists, links etc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CommonMark text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_usage_in_coded_text_instances"><a class="anchor" href="#_usage_in_coded_text_instances"></a>4.3.5.2. Usage in Coded_text Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>Coded_text</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term with a hyperlink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term or other text, containing newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain formatted text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Void or <code>"plain"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>4.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_text_class"><a class="anchor" href="#_text_class"></a>4.4.1. Text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Text (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item, which may contain any amount of legal characters arranged as e.g. words, sentences etc (i.e. one <code>Text</code> may be more than one word). Visual formatting and hyperlinks may be included via markdown.</p>
</div>
<div class="paragraph">
<p>If the <code><em>formatting</em></code> field is set, the <code><em>value</em></code> field is affected as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>formatting</em> = "plain"</code>: plain text, may contain newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "plain_no_newlines"</code>: plain text with no newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "markdown"</code>: text in markdown format; use of CommonMark strongly recommended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>Text</code> can be coded by adding mappings to it.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displayable rendition of the item, regardless of its underlying structure. For <code>DV_CODED_TEXT</code>, this is the rubric of the complete term as provided by the terminology service.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mappings</strong>: <code>List&lt;<a href="#_term_mapping_class">Term_mapping</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Terms from other terminologies most closely matching this term, typically used where the originator (e.g. pathology lab) of information uses a local terminology but also supplies one or more equivalents from well known terminologies (e.g. LOINC).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formatting</strong>: <code><a href="#_text_format_types_enumeration">Text_format_types</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set, contains one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"plain"</code>: use for plain text, possibly containing newlines, but otherwise unformatted;</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: use for text containing no newlines or other formatting;</p>
</li>
<li>
<p><code>"markdown"</code>: use for markdown formatted text, strongly recommended in the format of the CommonMark specification.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not set, <code>"plain_no_newlines"</code> is assumed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Mappings_valid</em>: <code>mappings /= void implies not mappings.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formatting_valid</em>: <code>formatting /= void implies not formatting.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_plain_text_class"><a class="anchor" href="#_plain_text_class"></a>4.4.2. Plain_text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Plain_text</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Plain text.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_text_class">Text</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_text_format_types_enumeration"><a class="anchor" href="#_text_format_types_enumeration"></a>4.4.3. Text_format_types Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Text_format_types</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain_no_newlines</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">markdown</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_coded_text_class"><a class="anchor" href="#_coded_text_class"></a>4.4.4. Coded_text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Coded_text</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item whose string value is a rubric from a controlled terminology, and whose code is given by <code><em>concept</em></code>. The <code><em>value</em></code> may be a 'preferred term' (where this concept is supported by the terminology), or another term. In the latter case, a/the preferred term may be included in the <code><em>mappings</em></code>.</p>
</div>
<div class="paragraph">
<p>Since <code>Coded_text</code> is a subtype of <code>Text</code>, it can be used in place of it, effectively allowing the type <code>Text</code> to mean  a text item, which may optionally be coded.</p>
</div>
<div class="paragraph">
<p>If <code><em>formatting</em></code> is present it is limited to <code>markdown</code> and may consist only of emphasis and / or hyperlink of the whole <code><em>value</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_text_class">Text</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The term of which the  <code><em>value</em></code> attribute is the textual rendition (i.e. rubric).</p>
</div>
<div class="paragraph">
<p>TODO: for GCM, default to Graphite Snomed extension</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_term_mapping_class"><a class="anchor" href="#_term_mapping_class"></a>4.4.5. Term_mapping Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Term_mapping</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents a coded term mapped to a <code>Text</code>, and the relative match of the target term with respect to the mapped item. Plain or coded text items may appear in the EHR for which one or mappings in alternative terminologies are required. Mappings are only used to enable computer processing, so they can only be instances of <code>Coded_text</code>.</p>
</div>
<div class="paragraph">
<p>Used for adding classification terms (e.g. adding ICD classifiers to SNOMED descriptive terms), or mapping into equivalents in other terminologies (e.g. across nursing vocabularies).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>match</strong>: <code><a href="#_term_mapping_match_enumeration">Term_mapping_match</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The relative match of the target term with respect to the mapped text item. Result meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>'&gt;'</code>: the mapping is to a broader term e.g. orginal text =  arbovirus infection , target =  viral infection</p>
</li>
<li>
<p><code>'='</code>: the mapping is to a (supposedly) equivalent to the original item</p>
</li>
<li>
<p><code>'&lt;'</code>: the mapping is to a narrower term. e.g. original text =  diabetes , mapping =  diabetes mellitus .</p>
</li>
<li>
<p><code>'?'</code>: the kind of mapping is unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first three values are taken from the ISO standards 2788 ( Guide to Establishment and development of monolingual thesauri) and 5964 (Guide to Establishment and development of multilingual thesauri).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>purpose</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Purpose of the mapping e.g. 'data mining', 'billing', 'interoperability', 'NLP extracted'.</p>
</div>
<div class="paragraph">
<p>TODO: any vocabulary?</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The target term of the mapping.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>narrower</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = &lt; implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a narrower term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>broader</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = &gt; implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a broader term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>equivalent</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to an equivalent term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>unknown</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = ? implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The kind of mapping is unknown.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_valid_match_code</strong> (<br>
c: <code><a href="#_term_mapping_match_enumeration">Term_mapping_match</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result := c = &gt; or c = = or c = &lt; or c = ?</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if match valid.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Purpose_valid</em>: <code>purpose /= Void implies terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_term_mapping_purpose, purpose.defining_code)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Match_valid</em>: <code>is_valid_match_code (match)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_term_mapping_match_enumeration"><a class="anchor" href="#_term_mapping_match_enumeration"></a>4.4.6. Term_mapping_match Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Term_mapping_match</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is equivalent to the original item.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a broader term e.g. orginal text =  arbovirus infection , target =  viral infection</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a narrower term. e.g. original text =  diabetes , mapping =  diabetes mellitus.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The kind of mapping is unknown.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ordered_package_quantities"><a class="anchor" href="#_ordered_package_quantities"></a>5. Ordered Package: Quantities</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The <code>base.data_types.ordered</code> package defines types used to represent any kind of number-based data type used in science and medicine. It is illustrated below. Temporal types (dates and times) are described in the next section.</p>
</div>
<div id="base_data_types_quantity" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.ordered-quantity.svg" alt="BASE data types.ordered quantity">
</div>
<div class="title">Figure 3. base.data_types.ordered package - quantities</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_3"><a class="anchor" href="#_requirements_3"></a>5.2. Requirements</h3>
<div class="sect3">
<h4 id="_stated_versus_observed_values"><a class="anchor" href="#_stated_versus_observed_values"></a>5.2.1. Stated Versus Observed Values</h4>
<div class="paragraph">
<p>A basic distinction exists for any kind of quantitative data, between the stated and the observed form (or <em>a priori</em> and <em>a posteriori</em> forms). A stated quantity takes the form of a numeric value(s) and any qualifying properties required to provide the complete semantics.</p>
</div>
<div class="paragraph">
<p>The observed form involves <em>measurement</em>, which is an attempt to determine a true value of some real world phenomenon via the use of an observation method or device. Measurement involves a number of extra concepts, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>accuracy</em>: the likely difference between the measured result and the true value;</p>
</li>
<li>
<p><em>reference range</em>: one or more value ranges relative to the specific subject of measurement, such as 'normal', 'high' and so on;</p>
</li>
<li>
<p><em>value status</em>: an indication of the relationship between the real value and the measurement that allows for limitations in device measurement, for example a device may display the value '&lt; 20g', indicating that the real weight is below its bottom measurement threshold.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reference ranges are particularly useful with pathology test results, e.g. serum sodium, and vital signs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dimensioned_quantities"><a class="anchor" href="#_dimensioned_quantities"></a>5.2.2. Dimensioned Quantities</h4>
<div class="paragraph">
<p>The most common kind of quantity is a dimensioned quantity, consisting of a real number and units.</p>
</div>
<div class="paragraph">
<p>Examples of stated dimensioned quantities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>systolic BP: 110 mmHg</p>
</li>
<li>
<p>height: 178 cm</p>
</li>
<li>
<p>rate of asthma attacks: 7 /week</p>
</li>
<li>
<p>weight loss: 2.5 kg</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of stated dimensioned quantities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>systolic BP: 110 5 mmHg</p>
</li>
<li>
<p>height: 178 cm</p>
</li>
<li>
<p>rate of asthma attacks: 7 /week</p>
</li>
<li>
<p>weight loss: 2.5 kg</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ratios_and_proportions"><a class="anchor" href="#_ratios_and_proportions"></a>5.2.3. Ratios and Proportions</h4>
<div class="paragraph">
<p>A common quantitative type in science and medicine is the proportion, or ratio, which is used in situations like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1:128 (a titer);</p>
</li>
<li>
<p>Na:K concentration ratio (unitary denominator);</p>
</li>
<li>
<p>albumin:creatinine ratio;</p>
</li>
<li>
<p>% e.g. red cell distribution width (RDW) which is the width of a distribution of RBC widths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general ratios have real number values, even if many examples appear to be integer ratios. Proportions with unitary denominator and % (denominator = 100) are common.</p>
</div>
</div>
<div class="sect3">
<h4 id="_formulations"><a class="anchor" href="#_formulations"></a>5.2.4. Formulations</h4>
<div class="paragraph">
<p>A concept superficially similar to proportions and ratios is formulations of materials, such as a solid in a liquid e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>250 mg / 500 ml (solute/solvent)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although a single solute/single solvent formulation appears to have the same form as a ratio, the general form is for any number of substances to be mixed together, usually according to a particular procedure. Formulations are therefore not candidates for direct modelling as fine-grained quantities, but instead are constructed by archetyping a higher-level structure, each leaf element of which contains the required kind of Quantity.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quantity_ranges"><a class="anchor" href="#_quantity_ranges"></a>5.2.5. Quantity Ranges</h4>
<div class="paragraph">
<p>Quantity ranges are ubiquitous in science and medicine, and may be defined for any kind of measured phenomenon. Examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>healthy weight range, e.g. 48kg - 60kg</p>
</li>
<li>
<p>normal range for urinalysis in pregnancy - protein, e.g. "nil" - "trace"</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reference_ranges"><a class="anchor" href="#_reference_ranges"></a>5.2.6. Reference Ranges</h4>
<div class="paragraph">
<p>A reference range is a quantity range attached to a measured value, and is common for laboratory result values. The typical form of a reference range found in a pathology result indicates what is considered the 'normal' range for a measured value. Examples of reference ranges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>normal range for serum Na is 135 - 145 mmol/L.</p>
</li>
<li>
<p>desirable total cholesterol: &lt; 5.5 mmol/L (strictly this probably should be 2.0 - 5.5 mmol/L, but is not usually quoted this way as low cholesterol is not considered a problem.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ranges can also be quoted for drug administrations, in which case they are usually thought of as the 'therapeutic' range. For example, the anticonvulsant drug Carbamazepine has a therapeutic range of 20 - 40 &#956;Mol/L. In some cases, there are multiple ranges associated with a drug, for example, Salicylate has a therapeutic range of 1.0 - 2.5 mmol/L and a toxic range &gt; 3.6 mmol/L</p>
</div>
<div class="paragraph">
<p>Various examples occur in which multiple ranges may be stated, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The administration recommendations for drugs which depend on the particular patient state. For example, the therapeutic range of Cyclosporin (an immunosuppressant) is a function of time post-transplant for the affected organ, e.g. kidney: &lt; 6 months: 250 - 350 &#956;g/L, &gt; 6 months: 100 - 200 &#956;g/L.</p>
</li>
<li>
<p>Normal ranges for blood IgG, IgA, IgM which vary significantly with the age in months from birth.</p>
</li>
<li>
<p>Progesterone and pituitary hormones have ranges which are different for different phases of the menstrual cycle and for menopause. This may result in 4 or 5 ranges given for one result. Only one will apply to any particular patient - but the exact phase of the cycle may be unknown - so the ranges may need to be associated with the value with no 'normal' range.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where there are multiple ranges, the important question is: <em>which range information is relevant to the actual data being recorded for the patient?</em> In theory, only the range corresponding to the particular patient situation should be used, i.e. the range which applies after taking into account sex, age, smoking status, "professional athlete", organ transplanted, etc. In most cases, this is a single "normal" range, or a pair of ranges, typically "therapeutic" and "critical". However, practical factors complicate things. Firstly, data is sometimes supplied from pathology labs along with some or all of the applicable reference ranges, even though only some could possibly apply. This is particularly the case if the laboratory has no other data on the patient, and cannot evaluate which range applies. The requirement for faithfulness of recording might be extended to reference data supplied by laboratories, regardless of how irrelevant or arbitrarily chosen the reference data is, meaning that such data has to be stored in the record anyway. Secondly, there may be circumstances in which physicians want a number of reference ranges, even while knowing that only one range is applicable to the datum. Ranges above and below the relevant one might be useful to a physician wishing to determine how far out of range the datum is.</p>
</div>
</div>
<div class="sect3">
<h4 id="_normal_range_and_status_in_laboratory_data"><a class="anchor" href="#_normal_range_and_status_in_laboratory_data"></a>5.2.7. Normal Range and Status in Laboratory data</h4>
<div class="paragraph">
<p>It is quite common for laboratories to include a normal range with each measured value, and/or a normal 'status', which indicates where the value lies with respect to the normal range. The latter will commonly take the form of markers like "HHH" (critically high), HH (abnormally high), H (borderline high), L, LL, LLL in HL7v2 messaging, although other schemes are undoubtedly used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scores_and_scales"><a class="anchor" href="#_scores_and_scales"></a>5.2.8. Scores and Scales</h4>
<div class="paragraph">
<p>Medicine is a domain in which symbols representing relative magnitudes are commonly used, without exact values being used. The main purpose is usually to classify patients into groups for which different decisions might be made. Such classifications are typically known as <em>scores</em> or <em>scales</em>. For example the characterisation of pain as 'mild', 'medium', 'severe', or the reflex response to tendon percussion as "-", "+/-", "+", "++", "+++", "++++". Many scores such as the Apgar Score, Glasgow Coma Scale (GCS), and Barthel Index are globally known and used.</p>
</div>
<div class="paragraph">
<p>In some cases, there may be no way (or need) to precisely quantify such values because they reflect a subjective experience of the patient or informal judgment by the clinician. However, they are understood as being ordered, e.g. pass: [<code>++</code>] is arithmetically greater than `+`.</p>
</div>
<div class="paragraph">
<p>Similarly, even though the symbolic values for haemolysed blood in a urinalysis have approximate ranges stated for them, as shown below, these 'values' are not usable in the same way as true quantities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"neg"</code>, <code>"trace"</code> (10 cells/&#956;l)</p>
</li>
<li>
<p><code>"small"</code> (&lt;25 cells/&#956;l)</p>
</li>
<li>
<p><code>"moderate"</code> (&lt;80 cells/&#956;l)</p>
</li>
<li>
<p><code>"large"</code> (&gt;200 cells/&#956;l)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A second requirement for score and scale values is that in many cases there is a need to associate numeric values with the symbols, in order to facilitate ordered comparison, and also to enable longitudinal comparison across results of the same kind (e.g. pain, protein). The majority of scores and scales are limited to Integer values, but some use Real numbers interspersed with Integers e.g. the <a href="https://www.researchgate.net/publication/228089364_Proposing_a_standardized_method_for_evaluating_patient_report_of_the_intensity_of_dyspnea_during_exercise_testing_in_COPD">Borg CR 10 scale</a> for perceived exertion. In both cases, values may be negative, zero or positive.</p>
</div>
</div>
<div class="sect3">
<h4 id="_countable_things"><a class="anchor" href="#_countable_things"></a>5.2.9. Countable Things</h4>
<div class="paragraph">
<p>A common kind of data value in medicine is the dimensionless countable quantity, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>number of doses: 2;</p>
</li>
<li>
<p>number of previous pregnancies: 1;</p>
</li>
<li>
<p>number of tablets: 3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Values of this type are always integral. Countable values need to be convertible to real numbers for statistical purposes, for example for a study of average number of pregnancies per couple.</p>
</div>
<div class="paragraph">
<p>Some countable entities such as tablets are divisible into major fractions, typically halves and occasionally quarters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_2"><a class="anchor" href="#_design_2"></a>5.3. Design</h3>
<div class="sect3">
<h4 id="_basic_semantics"><a class="anchor" href="#_basic_semantics"></a>5.3.1. Basic Semantics</h4>
<div class="paragraph">
<p>In order to make sense of the requirements in a systematic way, a proper typology for quantities is needed. The most basic characteristic of all values typically called 'quantities' is that they are ordered, meaning that the operator "&lt;" (less-than) is defined between any two values in the domain. An ancestor class for all quantities called <code>Dv_ordered</code> is accordingly defined. This type is sub-typed into ordinals, scales and true quantities, represented by the classes <code>Dv_ordinal</code>, <code>DV_SCALE</code> and <code>Quantified</code> respectively.</p>
</div>
<div class="paragraph">
<p><code>Dv_ordinal</code> is used for scores and scales as described in the requirements above. <code>Dv_ordinal</code> represents data values whose values are Integers, and which have symbolic or text names instead, such as "+", "++", "+++", or <code>"mild"</code>, <code>"medium"</code>, <code>"severe"</code>. Each symbol can be assigned any Integer value, providing a basis for computable comparison. Typical uses for <code>Dv_ordinal</code> include representing values from the Apgar and Glasgow Coma Scales, e.g. <code>0heart rate absent</code>, <code>4withdraws from pain</code>. <code>DV_SCALE</code> is similar to <code>Dv_ordinal</code>, and was introduced to support scales / scores containing Real values as well as Integers.</p>
</div>
<div class="paragraph">
<p>In contrast to <code>Dv_ordinal</code>, instances of <code>Quantified</code> and all its subtypes have precise numeric magnitudes. Accordingly, <code>Quantified</code> introduces the properties <code><em>magnitude</em></code> and <code><em>magnitude_status</em></code>. The <code><em>magnitude</em></code> attribute is guaranteed to be available on any <code>Quantified</code>, carrying the effective value, regardless of the particular subtype. The optional <code><em>magnitude_status</em></code> attribute can be used to provide a non-quantified indication of accuracy, and takes the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code> : magnitude is a point value</p>
</li>
<li>
<p><code>"&lt;"</code> : value is &lt; magnitude</p>
</li>
<li>
<p><code>"&gt;"</code> : value is &gt; magnitude</p>
</li>
<li>
<p><code>"&lt;="</code> : value is &lt;= magnitude</p>
</li>
<li>
<p><code>"&gt;="</code> : value is &gt;= magnitude</p>
</li>
<li>
<p><code>"~"</code> : value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, the meaning is <code>"="</code>.</p>
</div>
<div class="paragraph">
<p>Logically, an accuracy attribute should also be included in <code>Quantified</code>, but as its modelling is different in the subtypes in a way that does not easily lend itself to a common ancestor, it is only included in the subtypes.</p>
</div>
<div class="paragraph">
<p>The <code>Quantified</code> class has the subtypes <code>Dv_ratio</code>, <code>Quantity</code>, <code>Count</code>, and <code>Dv_duration</code> (see date_time package). The type <code>Count</code> has an integer magnitude and is used to record naturally countable things such as number of previous pregnancies, number of steps taken by a recovering stroke victim and so on. There are no units or precision in a <code>Count</code>. Countable quantities can be used to create instances of <code>Quantity</code>, such as during a statistical study which average tobacco
consumption over a time period. Such a computation might cause the creation of <code>Quantity</code> objects representing values like {magnitude = 5.85, units = '/ week'}</p>
</div>
<div class="paragraph">
<p><code>Quantity</code> is used to represent amounts of measurable things, and has a real number magnitude, precision, units and accuracy. The <code><em>units</em></code> attribute contains the scientific unit in a parsable form defined by default by the <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">Unified Code for Units of Measure (UCUM)</a> (case-sensitive form), or by another system or terminology specified in the <code><em>units_system</em></code> attribute. In some cases, such as metric units, the UCUM code and the display form are the same, e.g. 'kg'. However this is not the general case, and many common units have different display and code forms, e.g. degrees Celcius:  'C' and 'Cel'. In general the unit display name should be looked up if it is not known in context that the code is directly displayable. The <code><em>units_display_name</em></code> attribute may be used if the displayable form of the units is required in the data, and/or terminology lookup is not available or desirable. Unit names may be language dependent, particularly older units.</p>
</div>
<div class="paragraph">
<p>A valid units string always implies a measured <em>property</em>, such as force or pressure. If unit strings are compared in the application environment to determine if they measure the same property (e.g. <code>"bar"</code> and <code>"kPa"</code> are both units of 'pressure'), which enables the <code><em>is_strictly_comparable_to()</em></code> function defined on <code>Dv_ordered</code> to be properly specified on <code>Quantity</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
while these semantics will allow comparison of e.g. two pressures recorded in <code>mbar and mmHg, or even two accelerations whose units are `"m.s^-2"</code> and <code>"m/s^2"</code>, they provide no guarantee that this is a sensible thing to do in terms of domain semantics: comparing a blood pressure to an atmospheric pressure for example may or may not make any sense. It is not within the scope of the quantity package to express such semantics - this is up to application software which uses Quantities found in specific places in the data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_measured_values"><a class="anchor" href="#_measured_values"></a>5.3.2. Measured Values</h4>
<div class="paragraph">
<p>An important difference exists between values that are stated (e.g. as targets) and values that are measured in the real world. In the latter case, accuracy and precision are often recorded, and in clinical medicine, reference ranges relevant to the patient are often included as well.</p>
</div>
<div class="paragraph">
<p>The <code>Measured</code> class provides a place to record these extra data items, and may be instantiated in any instance of a descendant <code>Quantified</code> that represents a measurement.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quantity_ranges_2"><a class="anchor" href="#_quantity_ranges_2"></a>5.3.3. Quantity Ranges</h4>
<div class="paragraph">
<p>Ranges are modelled by the generic type <code>Dv_interval&lt;T:Dv_ordered&gt;</code> which enables a range of any of the other quantity types (except ratio) to be constructed. This allows any subtype of <code>Dv_ordered</code> to occur as a range as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_proportions"><a class="anchor" href="#_proportions"></a>5.3.4. Proportions</h4>
<div class="paragraph">
<p>The <code>Dv_ratio</code> type is provided for representing true ratios, i.e. relative values, and consists of numerator and denominator Real values, and a magnitude function which is computed as the result of the numerator/denominator division. The type attribute is used to indicate the logical type of the proportion. Supported types include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>percent</em>: denominator is 100; usual presentation is "numerator %"</p>
</li>
<li>
<p><em>unitary</em>: denominator is 1; usual presentation is "numerator"</p>
</li>
<li>
<p><em>fraction</em>: numerator and denominator are both integer values; usual presentation is n/d, e.g. such as  or , 1/2, 3/4 etc;</p>
</li>
<li>
<p><em>integer_fraction</em>: numerator and denominator are both integer values; usual presentation is n/d; if numerator &gt; denominator, display as "a b/c", i.e. the integer part followed by the remaining fraction part, e.g. 1; this is the most likely form for expressing a number of tablets;</p>
</li>
<li>
<p><em>ratio</em>: numerator and denominator can take any value; usual presentation is "numerator: denominator"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lastly, the <code><em>is_integral</em></code> function indicates that the numerator and denominator are both integer values; this is used for fractions (the fraction and integer_fraction types above) and other commonly occurring ratios where both parts are always integer values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5"><a class="anchor" href="#_class_descriptions_5"></a>5.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_ordinal_class"><a class="anchor" href="#_ordinal_class"></a>5.4.1. Ordinal Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ordinal</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data type that represents integral score values, e.g. pain, Apgar values, etc, where there is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implied ordering,</p>
</li>
<li>
<p>no implication that the distance between each value is constant, and</p>
</li>
<li>
<p>the total number of values is finite;</p>
</li>
<li>
<p>Integer values normally used but Real values are accommodated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that although the term 'ordinal' in mathematics means natural numbers only, here any integer is allowed, since negative and zero values are often used by medical professionals for values around a neutral point. Examples of sets of ordinal values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-3, -2, -1, 0, 1, 2, 3 &#8201;&#8212;&#8201;reflex response values</p>
</li>
<li>
<p>0, 1, 2                 &#8201;&#8212;&#8201;Apgar values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class is used for recording any clinical datum which is customarily recorded using symbolic values. Example: the results on a urinalysis strip, e.g. <code>{neg, trace, +, ++, \+++}</code> are used for leucocytes, protein, nitrites etc; for non-haemolysed blood <code>{neg, trace, moderate}</code>; for haemolysed blood <code>{small, moderate, large}</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_ordered_class">Ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Coded textual representation of this value in the enumeration, which may be strings made from  +  symbols, or other enumerations of terms such as  <code>mild</code>, <code>moderate</code>, <code>severe</code>, or even the same number series as the values, e.g. 1, 2, 3.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value in ordered enumeration of values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_ordinal_class">Ordinal</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Ordinal value is less than <code><em>other</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_quantified_class"><a class="anchor" href="#_quantified_class"></a>5.4.2. Quantified Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Quantified (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of relative quantified  'amounts'. For relative quantities, the  <code>+</code> and  <code>-</code> operators are defined (unlike descendants of <code>DV_ABSOLUTE_QUANTITY</code>, such as the date/time types).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_ordered_class">Ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>measured</strong>: <code><a href="#_measured_class">Measured</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_comparable_numeric_class" target="_blank" rel="noopener">Comparable_Numeric</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_quantified_class">Quantified</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_quantified_class">Quantified</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_quantified_class">Quantified</a>[1]</code><br>
): <code><a href="#_quantified_class">Quantified</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this amount and another. The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>both operand accuracies are unknown_accuracy_value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the accuracy value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_quantified_class">Quantified</a>[1]</code><br>
): <code><a href="#_quantified_class">Quantified</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this amount and another. The value of <code><em>accuracy</em></code> in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code><em>accuracy</em></code> value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_quantified_class">Quantified</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Amount and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>negative</strong> <em>alias</em> "-" (): <code><a href="#_quantified_class">Quantified</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Negated version of current object, such as used for representing a difference, e.g. a weight loss.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_quantity_class"><a class="anchor" href="#_quantity_class"></a>5.4.3. Quantity Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Quantity</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Quantitified type representing  scientific  quantities, i.e. quantities expressed as a magnitude and units. Units are expressed in the UCUM syntax (<a href="http://unitsofmeasure.org/ucum.html">Unified Code for Units of Measure (UCUM)</a>, by Gunther Schadow and Clement J. McDonald of The Regenstrief Institute)  (case-sensitive form) by default, or another system if <code><em>units_system</em></code> is set.</p>
</div>
<div class="paragraph">
<p>Can also be used for time durations, where it is more convenient to treat these as simply a number of seconds rather than days, months, years (in the latter case, <code>DV_DURATION</code> may be used).</p>
</div>
<div class="paragraph">
<p>TODO: do we want to have an original_units field.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_quantified_class">Quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quantity units, expressed as a code from either UCUM or the units system specified in <code><em>unit_system</em></code>, when set.</p>
</div>
<div class="paragraph">
<p>In either case, the value is the code or syntax - normally formed of standard ASCII - which is in principal not the same as the display string, although in simple cases such as 'm' (for meters) it will be.</p>
</div>
<div class="paragraph">
<p>Code system is a URI identifying a terminology containing units concepts from the  (<a href="https://www.hl7.org/fhir/terminologies-systems.html">HL7 FHIR terminologies list</a>).</p>
</div>
<div class="paragraph">
<p><code>Terminology_term.text</code> field contains the displayable form of the unit, e.g. <code>'C'</code>.</p>
</div>
<div class="paragraph">
<p>Example values from UCUM: "kg/m^2", mm[Hg]", "ms-1", "km/h".</p>
</div>
<div class="paragraph">
<p>TODO: review; status of UCUM in GCM (Stan)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_quantity_class">Quantity</a>[1]</code><br>
): <code><a href="#_quantity_class">Quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_quantity_class">Quantity</a>[1]</code><br>
): <code><a href="#_quantity_class">Quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_quantity_class">Quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this <code>DV_QUANTITY</code> and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_quantity_class">Quantity</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_quantity_class">Quantity</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_count_class"><a class="anchor" href="#_count_class"></a>5.4.4. Count Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Count</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Countable quantities. Used for countable types such as pregnancies and steps (taken by a physiotherapy patient), number of cigarettes smoked in a day.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_quantified_class">Quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integer value of the count.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ratio_class"><a class="anchor" href="#_ratio_class"></a>5.4.5. Ratio Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ratio</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Models a ratio of values, i.e. where the numerator and denominator are both pure numbers. The <code><em>valid_proportion_kind</em></code> property of the <code>RatioKind</code> class is used to control the type attribute to be one of a defined set.</p>
</div>
<div class="paragraph">
<p>Used for recording titers (e.g. 1:128), concentration ratios, e.g. Na:K (unitary denominator), albumin:creatinine ratio, and percentages, e.g. red cell distirbution width (RDW).</p>
</div>
<div class="paragraph">
<p>Misuse: Should not be used to represent things like blood pressure which are often written using a  '/' character, giving the misleading impression that the item is a ratio, when in fact it is a structured value. Similarly, visual acuity, often written as (e.g.) "6/24" in clinical notes is not a ratio but an ordinal (which includes non-numeric symbols like CF = count fingers etc). Should not be used for formulations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_quantified_class">Quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>numerator</strong>: <code><a href="#_quantity_class">Quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TODO: possibly needs to be a Quantified?</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denominator</strong>: <code><a href="#_quantity_class">Quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denominator of ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="#_ratio_kind_enumeration">Ratio_kind</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed value of numerator / denominator.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_ratio_class">Ratio</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_ratio_class">Ratio</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_ratio_class">Ratio</a>[1]</code><br>
): <code><a href="#_ratio_class">Ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_ratio_class">Ratio</a>[1]</code><br>
): <code><a href="#_ratio_class">Ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_ratio_class">Ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Proportion and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ratio_kind_enumeration"><a class="anchor" href="#_ratio_kind_enumeration"></a>5.4.6. Ratio_kind Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ratio_kind</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">rational_fraction</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numerator and denominator are both integers, and value is displayed in form of a fraction, e.g. 1/3, 2 1/4.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">ratio</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_measured_class"><a class="anchor" href="#_measured_class"></a>5.4.7. Measured Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Measured&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Additional data that may be recorded for measured form of a quantified item, including with optional accuracy, normal range and other reference ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_range_class">Range</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_status</strong>: <code><a href="#_comparison_operator_enumeration">Comparison_operator</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional status of magnitude with respect to real-world value:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code>   : real value is equal to recorded value</p>
</li>
<li>
<p><code>"&lt;"</code>   : real value is &lt; recorded value</p>
</li>
<li>
<p><code>"&gt;"</code>   : real value is &gt; recorded value</p>
</li>
<li>
<p><code>"&lt;="</code> : real value is &lt;= recorded value</p>
</li>
<li>
<p><code>"&gt;="</code> : real value is &gt;= recorded value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, assumed meaning is  <code>"="</code> .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Precision to which the value of the quantity is expressed, in terms of number of decimal places. The value 0 implies an integral quantity.
The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_comparable_class" target="_blank" rel="noopener">Comparable</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accuracy of measurement. A value of zero means no accuracy recorded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_is_percent</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>True</code>, indicates that when this object was created, <code><em>accuracy</em></code> was recorded as a percent value; if <code>False</code>, as an absolute quantity value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code>List&lt;<a href="#_reference_range_class">Reference_range</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_reference_range_class"><a class="anchor" href="#_reference_range_class"></a>5.4.8. Reference_range Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Reference_range&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Defines a named range to be associated with any <code>DV_ORDERED</code> datum. Each such range is particular to the patient and context, e.g. sex, age, and any other factor which affects ranges. May be used to represent normal, therapeutic, dangerous, critical etc ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>meaning</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Term whose value indicates the meaning of this range, e.g.  normal,  critical,  therapeutic  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>range</strong>: <code><a href="#_range_class">Range</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data range for this meaning, e.g. critical  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Range_is_simple</em>: <code>(range.lower_unbounded or else range.lower.is_simple) and (range.upper_unbounded or else range.upper.is_simple)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_comparison_operator_enumeration"><a class="anchor" href="#_comparison_operator_enumeration"></a>5.4.9. Comparison_operator Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Comparison_operator</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Enumeration of value comparators.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &lt; recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &gt; recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &lt;= recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &gt;= recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is equal to recorded value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_range_class"><a class="anchor" href="#_range_class"></a>5.4.10. Range Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Range&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data value in the form of a range of Ordered values, as well as date/times. One-sided ranges are formed when one of the limits is void. The values of the limits, when present, are always understood to be included in the range.</p>
</div>
<div class="paragraph">
<p>At least one limit has to be present.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lower</strong>: <code>V</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Lower limit of range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>upper</strong>: <code>V</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Upper limit of range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Validity</em>: <code>lower /= Void or upper /= Void</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes"><a class="anchor" href="#_syntaxes"></a>5.5. Syntaxes</h3>
<div class="sect3">
<h4 id="_units_syntax"><a class="anchor" href="#_units_syntax"></a>5.5.1. Units Syntax</h4>
<div class="paragraph">
<p>The BNF syntax specification of the units string, adapted from <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">UCUM</a> (case-sensitive form) is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">units </span><span class="tok-o">=</span> <span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;.&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">exp_units </span><span class="tok-p">;</span>
<span class="tok-k">exp_units </span><span class="tok-o">=</span> <span class="tok-k">unit_group exponent </span><span class="tok-p">|</span> <span class="tok-k">unit_group </span><span class="tok-p">;</span>
<span class="tok-k">unit_group </span><span class="tok-o">=</span> <span class="tok-k">PREFIX annot_unit </span><span class="tok-p">|</span> <span class="tok-k">annot_unit </span><span class="tok-p">|</span> <span class="tok-s1">&#39;(&#39;</span> <span class="tok-k">exp_units </span><span class="tok-s1">&#39;)&#39;</span> <span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">annot_unit </span><span class="tok-o">=</span> <span class="tok-k">unit_name </span><span class="tok-p">[</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">]</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>
<span class="tok-k">exponent </span><span class="tok-o">=</span> <span class="tok-p">[</span> <span class="tok-k">SIGN </span><span class="tok-p">]</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>

<span class="tok-k">PREFIX </span><span class="tok-o">=</span> <span class="tok-s1">&#39;Y&#39;</span> <span class="tok-p">|</span><span class="tok-s1">&#39;Z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;E&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;P&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;T&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;G&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;M&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;k&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;h&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;da&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;d&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;c&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;m&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;n&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;p&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;f&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;a&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;y&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">UNIT_NAME </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z_%]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">ANNOTATION </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z&#39;.]+ ?</span><span class="tok-p">;</span>  <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SUFFIX </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z0-9&#39;_]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SIGN </span><span class="tok-o">=</span> <span class="tok-s1">&#39;+&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;-&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">Integer </span><span class="tok-o">=</span> <span class="tok-ni">? [0-9]+ ?</span><span class="tok-p">;</span>          <span class="tok-cm">(* regex *)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This proposal is comprehensive, covering all useful unit systems, including SI, various imperial, customary measures, and some obscure measures, as well as clinically specific additions. Metric prefixes, meaning-changing textual suffixes (e.g. "[Hg]" in "mm[Hg]") and non-meaning-changing annotations (e.g. "kg {total}") are recognised. With this syntax, units can be simply expressed in strings such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>&quot;kg/m^2&quot;, &quot;m.s^-1&quot;, &quot;km/h&quot;, &quot;mm[Hg]&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and so on.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ordered_package_temporal"><a class="anchor" href="#_ordered_package_temporal"></a>6. Ordered Package: Temporal</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The temporal types from the <code>base.data_types.ordered</code> package provide data types for date, date/time, time and duration, based on <a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank" rel="noopener">ISO 8601:2019 standard</a>. They are formally defined in terms of the primitive <code>Date</code>, <code>Date_time</code>, <code>Time</code> and <code>Duration</code> types from the BASE component.</p>
</div>
<div class="paragraph">
<p>They are illustrated below.</p>
</div>
<div id="base_data_types_time" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.ordered-time.svg" alt="BASE data types.ordered time">
</div>
<div class="title">Figure 4. base.data_types.ordered package - temporal types</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_6"><a class="anchor" href="#_class_descriptions_6"></a>6.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_temporal_value_class"><a class="anchor" href="#_temporal_value_class"></a>6.2.1. Temporal_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Temporal_value&lt;T&gt; (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Parent of Data value types based on the primitive Temporal types. Uses a direct String representation and a function to generate the relevant Temporal instance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_ordered_class">Ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>as_temporal</strong> (): <code>T</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_date_value_class"><a class="anchor" href="#_date_value_class"></a>6.2.2. Date_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Date_value</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_temporal_value_class">Temporal_value</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_time_value_class"><a class="anchor" href="#_time_value_class"></a>6.2.3. Time_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Time_value</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_temporal_value_class">Temporal_value</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_date_time_value_class"><a class="anchor" href="#_date_time_value_class"></a>6.2.4. Date_time_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Date_time_value</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_temporal_value_class">Temporal_value</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_duration_value_class"><a class="anchor" href="#_duration_value_class"></a>6.2.5. Duration_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Duration_value</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_temporal_value_class">Temporal_value</a></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_timing"><a class="anchor" href="#_timing"></a>7. Timing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>7.1. Overview</h3>
<div class="paragraph">
<p>The <code>timing</code> package contains classes that provide a structured model of representation of timing of events in the past or future, in two forms: as a list of occurrences, and as a pattern. The latter supports common ways of stating times such as used in medication prescription. The timing package is shown below.</p>
</div>
<div id="data_types_timing_package" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.timing.svg" alt="BASE data types.timing">
</div>
<div class="title">Figure 5. base_types.timing Package</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_4"><a class="anchor" href="#_requirements_4"></a>7.2. Requirements</h3>
<div class="paragraph">
<p>The Timing model responds to the need for expressing the time(s) at which some event did occur in the past or should occur in the future. The past case is used for reporting occurrences of illness, pain or any other health-related matter, including mental health events. The future case is typically used to indicate when to perform some healthcare-related activity, such as medication administration or exercise.</p>
</div>
<div class="paragraph">
<p>In both cases there are two common ways to represent timing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>history</strong>: a list of time-points, possibly with associated durations;</p>
</li>
<li>
<p><strong>pattern</strong>: in the form of a rule or simple algorithm that can be interpreted by humans to express the intended specific real-world times.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The latter may have a bounding time interval defined for it such as 'from tomorrow until end of the month' or 'until next week'.</p>
</div>
<div class="paragraph">
<p>Typical pattern examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>twice a day for the last week;</p>
</li>
<li>
<p>three times a day with meals for the next 7 days;</p>
</li>
<li>
<p>once every four hours.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some of the elements that need to be represented in timing specifications are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>period of repetition;</p>
</li>
<li>
<p>duration of activity being specified;</p>
</li>
<li>
<p>possible alignment to the calendar, e.g. "every 5th of the month";</p>
</li>
<li>
<p>possible alignment to real world events e.g. "after meals";</p>
</li>
<li>
<p>variable precision.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_2"><a class="anchor" href="#_semantics_2"></a>7.3. Semantics</h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_7"><a class="anchor" href="#_class_descriptions_7"></a>7.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_timing_class"><a class="anchor" href="#_timing_class"></a>7.4.1. Timing Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Timing</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Representation of timing of events, either in the past or future. Two modes are supported: a history of occurrences, and a pattern of occurrences. Both may be used in the same instance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pattern</strong>: <code><a href="#_occurrence_pattern_class">Occurrence_pattern</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Pattern form of timing representation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>history</strong>: <code>List&lt;<a href="#_occurrence_class">Occurrence</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Historical series of occurrences of a kind of event. May be used to specify future occurrences.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_occurrence_class"><a class="anchor" href="#_occurrence_class"></a>7.4.2. Occurrence Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Occurrence</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Representation of a single occurrence of some event, including date, time of day, and duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>date</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_date_class" target="_blank" rel="noopener">Date</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Date of the occurrence.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time_of_day</strong>: <code>List&lt;<a href="#_hour_specifier_class">Hour_specifier</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time of day of the occurrence.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_occurrence_pattern_class"><a class="anchor" href="#_occurrence_pattern_class"></a>7.4.3. Occurrence_pattern Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Occurrence_pattern</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Pattern-based description of events in the past or future.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bounding_period</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_date_class">Date</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Period bounding history of events.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>total_count</strong>: <code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>times</strong>: <code>List&lt;<a href="#_time_specifier_class">Time_specifier</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Times at which event took place or should take place.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Total_count_validity</em>: <code>total_count &gt;=0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_time_specifier_class"><a class="anchor" href="#_time_specifier_class"></a>7.4.4. Time_specifier Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Time_specifier (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Specification of date and time in customary terms.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>event_count</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_period_specifier_class"><a class="anchor" href="#_period_specifier_class"></a>7.4.5. Period_specifier Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Period_specifier</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Time specified as a period, meaning 'every &lt;period&gt;'.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_time_specifier_class">Time_specifier</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>period</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_duration_class" target="_blank" rel="noopener">Duration</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_day_specifier_class"><a class="anchor" href="#_day_specifier_class"></a>7.4.6. Day_specifier Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Day_specifier</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_time_specifier_class">Time_specifier</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specification of the day as a specific day(s) of week, 'weekday', 'weekend', '1st of month' .. '31st of month', 'bi-weekly' and so on.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time_of_day</strong>: <code>List&lt;<a href="#_hour_specifier_class">Hour_specifier</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_hour_specifier_class"><a class="anchor" href="#_hour_specifier_class"></a>7.4.7. Hour_specifier Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Hour_specifier (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract specification of a point in time during the day.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>duration</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_duration_class" target="_blank" rel="noopener">Duration</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional duration. Void value indicates either an instantaneous event, or that the event duration is unknown or not important.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_clock_time_class"><a class="anchor" href="#_clock_time_class"></a>7.4.8. Clock_time Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Clock_time</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Time in day expressed as a standard clock time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_hour_specifier_class">Hour_specifier</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_time_class" target="_blank" rel="noopener">Time</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_customary_time_class"><a class="anchor" href="#_customary_time_class"></a>7.4.9. Customary_time Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Customary_time</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Time in day expressed as a customary time, typically related to other events during the day such as meals, waking up etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_hour_specifier_class">Hour_specifier</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>reference_event</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference event during day to which event being specified is linked, e.g. 'waking', 'going to bed', 'meal', 'breakfast', etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>temporal_relation</strong>: <code><a href="#_temporal_relation_enumeration">Temporal_relation</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional temporal relation to the reference event.</p>
</div>
<div class="paragraph">
<p>TODO: this may be superfluous if the codes for <code><em>time</em></code> include the reference event.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_temporal_relation_enumeration"><a class="anchor" href="#_temporal_relation_enumeration"></a>7.4.10. Temporal_relation Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Temporal_relation</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Enumeration of temporal relations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">after</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time is after the reference event.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">before</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time is before the reference event.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">with</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time is with / during the reference event.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encapsulated_package"><a class="anchor" href="#_encapsulated_package"></a>8. Encapsulated Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7"><a class="anchor" href="#_overview_7"></a>8.1. Overview</h3>
<div class="paragraph">
<p>The <code>base.data_types.encapsulated</code> package contains classes representing data values whose internal structure is defined outside the EHR model, such as multimedia and parsable data. It is illustrated below.</p>
</div>
<div id="base_data_types_encapsulated" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.encapsulated.svg" alt="BASE data types.encapsulated">
</div>
<div class="title">Figure 6. base.data_types.encapsulated package</div>
</div>
<div class="sect3">
<h4 id="_requirements_5"><a class="anchor" href="#_requirements_5"></a>8.1.1. Requirements</h4>
<div class="paragraph">
<p>There is a need to be able to include content in the EHR whose interior structure is not modelled in the EHR reference model, but instead documented by sufficient meta-data attributes for specific tools to process the data. Types of content in this category are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Images, including images which are themselves a compressed version of one image from a high-resolution image set stored elsewhere. Such images may be in any of the well-known compressed or uncompressed formats, and may have their own thumbnail image attached, to facilitate web-viewing.</p>
</li>
<li>
<p>Bio-signal data series, such as a set of values representing a diagnostic part of an ECG trace. This might be represented as DICOM content.</p>
</li>
<li>
<p>Content which is textual (or nearly so) which is essentially a parsable language file of some kind. This includes all XML instance, HTML, and any other EHR content which happens to be represented in syntax form - such as the unit strings used in quantities. The name of the formalism should be stored as meta-data.</p>
</li>
<li>
<p>Binary content which is processed by a work processor or other dedicated tool.</p>
</li>
<li>
<p>Digital signatures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sufficient meta-data must be included with all of these types to enable a way for the content to be processed, typically by indicating either its type (e.g. "jpeg", "word document") or the name of a tool which can be used to process it. Important meta-data include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>size of the content;</p>
</li>
<li>
<p>natural language, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any encapsulated data item may be a summary, "thumbnail" or otherwise reduced form of an original content item found outside the EHR, in some other system or file-system. Checksums must be expressible for those items for which a checksum is available, or for which the system generates checksums to improve the quality of its internal data transmissions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_3"><a class="anchor" href="#_design_3"></a>8.1.2. Design</h4>
<div class="paragraph">
<p>The design approach used here is based on the following analysis.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Any encapsulated data item may be in some particular language, even if it is an image or other graphic form such as a bio-signal with axis markings in a particular language;</p>
</li>
<li>
<p>The general structure of encapsulated content data items includes a block of bytes or characters representing the content, and various meta-data as appropriate, including:</p>
<div class="ulist">
<ul>
<li>
<p>size</p>
</li>
<li>
<p>character encoding</p>
</li>
<li>
<p>compression type/algorithm</p>
</li>
<li>
<p>name of formalism for parsable content</p>
</li>
</ul>
</div>
</li>
<li>
<p>For encapsulated items that have a counterpart in another system, the standard means of portable address is the W3C URI;</p>
</li>
<li>
<p>For items may that have an associated integrity checksum, the checksum is itself a series of bytes, and the type of checksum must also be specified, e.g. "md5".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These observations lead naturally to an abstract <code>Encapsulated</code> class, with two subtypes, <code>Parsable</code>, for all content which is syntactic in nature, and <code>Multimedia</code> for everything else. Note that it is possible to imagine parsable content items which are large, stored in compressed form, and are themselves a summary of another item elsewhere on the web; such items can for practical purposes be represented as instances of <code>Multimedia</code>, rather than <code>Parsable</code>. The vast majority of parsable encapsulated data are expected to be short and stored in native textual form, e.g. fragments of XML or HTML.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>8.1.3. Examples</h4>
<div class="paragraph">
<p>The following examples show how to use the classes to represent some common encapsulated data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data format</th>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Parsable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON, minified<br>
 (white space removed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Parsable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = minified JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>uri</em></code> = URI at which document is located<br>
                                             <code><em>media_type</em> = "IANA::application/json"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of target.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG, Base64<br>
 encoded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying Base64 string of JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg;base64"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG with<br>
 SHA-2 hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>integrity_check</em></code> = byte array containing SHA-2 hash<br>
                                             <code><em>integrity_check_algorithm</em> = "openehr::SHA-2"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_8"><a class="anchor" href="#_class_descriptions_8"></a>8.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_encapsulated_class"><a class="anchor" href="#_encapsulated_class"></a>8.2.1. Encapsulated Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Encapsulated (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the common meta-data of all types of encapsulated data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of the localised language in which the data is written, if relevant. Coded from openEHR Code Set <code>languages</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>language /= Void implies code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Charset_valid</em>: <code>charset /= Void implies code_set (Code_set_id_character_sets).has_code (charset)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_multimedia_class"><a class="anchor" href="#_multimedia_class"></a>8.2.2. Multimedia Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Multimedia</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A specialisation of <code>Dv_encapsulated</code> for audiovisual and bio-signal types. Includes further metadata relating to multimedia types which are not applicable to other subtypes of <code>Dv_encapsulated</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_encapsulated_class">Encapsulated</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>alternate_text</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Text to display in lieu of multimedia display/replay.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_uri_class" target="_blank" rel="noopener">Uri</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>URI reference to electronic information stored outside the record as a file, database entry etc, if supplied as a reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code>List&lt;<a href="/releases/BASE/latest/foundation_types.html#_byte_class" target="_blank" rel="noopener">Byte</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The actual data found at <code><em>uri</em></code>, if supplied inline, base64 encoded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>media_type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data media type coded from openEHR code set  media types  (interface for the IANA MIME types code set).
Example: image/jpeg; text/json.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hash</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SHA-1 integrity checksum as a Base64 string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>thumbnail</strong>: <code><a href="#_multimedia_class">Multimedia</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The thumbnail for this item, if one exists; mainly for graphics formats.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Original size in bytes of unencoded encapsulated data. I.e. coding in base64, hexadecimal etc. do not change the value of this attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>media_attributes</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_hash_class">Hash<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>, <a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key / value list of media attributes, e.g. image size, video duration etc.</p>
</div>
<div class="paragraph">
<p>TODO: try to standardize keys?</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_external</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the <code><em>uri</em></code> attribute: True if  the data is stored externally to the record, as indicated by <code><em>uri</em></code>. A copy may also be stored internally, in which case <code><em>is_expanded</em></code> is also true.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_inline</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the data attribute. True if  the  data is stored  in  expanded  form, ie within the EHR itself.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Not_empty</em>: <code>is_inline or is_external</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Media_type_valid</em>: <code>media_type /= Void and then code_set (Code_set_id_media_types).has_code (media_type)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Compression_algorithm_validity</em>: <code>compression_algorithm /= Void implies code_set (Code_set_id_compression_algorithms).has_code (compression_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_validity</em>: <code>integrity_check /= Void implies integrity_check_algorithm /= Void</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_algorithm_validity</em>: <code>integrity_check_algorithm /= Void implies code_set (Code_set_id_integrity_check_algorithms).has_code (integrity_check_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parsable_class"><a class="anchor" href="#_parsable_class"></a>8.2.3. Parsable Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Parsable</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Encapsulated data expressed as a parsable String, such as HTML5, a programming language source file etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_encapsulated_class">Encapsulated</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formalism</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the formalism, e.g.  GLIF 1.0 ,  Proforma  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string, which may validly be empty in some syntaxes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Size in bytes of value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formalism_valid</em>: <code>not formalism.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uri_package"><a class="anchor" href="#_uri_package"></a>9. Uri Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_8"><a class="anchor" href="#_overview_8"></a>9.1. Overview</h3>
<div class="paragraph">
<p>The <code>base.data_types.uri</code> package includes two types used for referring to information resources. The <code>DV_URI</code> type allows data values which are references to objects on the world wide web to be created. Its specialisation, <code>DV_EHR_URI</code>, enables any element in an Graphite record to be identified in the same way as other objects on the web. The <code>DV_EHR_URI</code> type is convenient, because it is a string, like any other URI, and is therefore easily transportable and processable. Because it has its own scheme space, 'ehr', instances can be globally unique, as long as EHR identification is globally unique. <code>DV_EHR_URIs</code> are used to express all runtime paths in the EHR. The <code>uri</code> Package is illustrated below.</p>
</div>
<div id="base_data_types_uri" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/BASE-data_types.uri.svg" alt="BASE data types.uri">
</div>
<div class="title">Figure 7. base.data_types.uri package</div>
</div>
<div class="sect3">
<h4 id="_requirements_6"><a class="anchor" href="#_requirements_6"></a>9.1.1. Requirements</h4>
<div class="paragraph">
<p>This package meets the requirement for a <code>Data_value</code> subtype which represents a W3C Uniform Resource Identifier (URI). A common example of where this might be used is to represent a reference to a clinical guideline or other justifying document associated with an intervention or treatment plan recorded in the EHR.</p>
</div>
<div class="paragraph">
<p>URIs are a superset of Uniform Resource Locators (URLs) (although the two are often confused, even within the W3C), and can be used to specify the location of any information item, regardless of its type, location or storage method, as long as a URI "scheme" exists for that type of information.</p>
</div>
<div class="paragraph">
<p>There is an additional requirement for a kind of URI that can point at an EHR data item, either inside the same EHR containing the link, or in another EHR. This is the basis of implementing logical references in the EHR and between EHRs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_4"><a class="anchor" href="#_design_4"></a>9.1.2. Design</h4>
<div class="paragraph">
<p>A simple design approach is used whereby a URI is represented as a String, and appropriate functions are defined to extract the various parts according to the syntax of URIs defined by Tim Berners-Lee (<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">IETF RFC 3986</a>). An EHR specific subtype is defined, whose scheme is 'ehr', and which contains further attributes enabling the instances of the type to record what kind of object they are referring to.</p>
</div>
<div class="paragraph">
<p>So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis of human readability, but must be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definitions"><a class="anchor" href="#_definitions"></a>9.2. Definitions</h3>
<div class="paragraph">
<p>The following symbolic definitions are used in the classes below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Ehr_scheme</em></code>: <code>String</code> = "ehr"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_9"><a class="anchor" href="#_class_descriptions_9"></a>9.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_uri_ref_class"><a class="anchor" href="#_uri_ref_class"></a>9.3.1. Uri_ref Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Uri_ref</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A reference to an object which structurally conforms to the Universal Resource Identifier (URI) RFC-3986 standard. The reference is contained in the <code><em>value</em></code> attribute, which is a <code>String</code>. So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis that they need to be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value of URI as a String. 'Plain-text' URIs are allowed, enabling better readability, but must be RFC-3986 encoded in use.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheme</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A distributed information 'space' in which  information objects  exist. The scheme simultaneously specifies an information space and a mechanism for accessing objects in  that  space.  For  example  if  scheme  = "ftp", it identifies the information space in which  all  ftp-able objects  exist,  and also the application - ftp - which can be used to access them. Values may include: "ftp", "telnet", "mailto", etc. Refer to RFC-3986 for a full list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A string whose format is  a  function  of  the  scheme. Identifies   the   location  in  &lt;scheme&gt;-space  of  an information entity. Typical values include hierarchical directory  paths  for  any  machine.  For example, with scheme = "ftp", path might be <code>"/pub/images/image_01"</code>. The strings "." and ".." are reserved for use in the path. Paths may include internet/intranet location identifiers of the form: <code>sub_domain&#8230;&#8203;domain</code>, e.g. <code>"info.cern.ch"</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fragment_id</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A part of, a  fragment  or  a  sub-function  within  an object. Allows references to sub-parts of objects, such as a certain line and character  position  in  a  text object. The  syntax  and semantics are defined by the application responsible for the object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Query string to send to application implied  by  scheme and  path.  Enables  queries  to applications, including databases  to  be  included in  the  URI. Supports any query meaningful to the server, including SQL.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>not value.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ehr_uri_ref_class"><a class="anchor" href="#_ehr_uri_ref_class"></a>9.3.2. Ehr_uri_ref Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ehr_uri_ref</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A <code>DV_EHR_URI</code> is a <code>DV_URI</code> which has the scheme name 'ehr', and which can only reference items in EHRs.</p>
</div>
<div class="paragraph">
<p>Used to reference items in an EHR, which may be the same as the current EHR (containing this link), or another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_uri_ref_class">Uri_ref</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Scheme_valid</em>: <code>scheme.is_equal (Ehr_scheme)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_2"><a class="anchor" href="#_syntaxes_2"></a>9.4. Syntaxes</h3>
<div class="sect3">
<h4 id="_dv_ehr_uri_syntax"><a class="anchor" href="#_dv_ehr_uri_syntax"></a>9.4.1. DV_EHR_URI Syntax</h4>
<div class="paragraph">
<p>The syntax of a <code>DV_EHR_URI</code> is an Graphite path, inside the 'ehr' URI scheme-space, and is one of the forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ehr://system_id/ehr_id/top_level_structure_locator/path_inside_top_level_structure
ehr:/ehr_id
ehr:/ehr_id/top_level_structure_locator
ehr:/ehr_id/top_level_structure_locator/path_inside_top_level_structure</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax is described in more detail in the <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html#_ehr_uris">Graphite Architecture Overview</a>. <code>DV_EHR_URIs</code> are used as a mechanism for referencing in the EHR, ensuring readability by humans, as well as validity when extracts are transmitted elsewhere: even if the target of a path is not present, the path can be used to locate the missing item on demand.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_strategies"><a class="anchor" href="#_implementation_strategies"></a>10. Implementation Strategies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_9"><a class="anchor" href="#_overview_9"></a>10.1. Overview</h3>
<div class="paragraph">
<p>This section notes a few of the general challenges for mapping the Graphite data types to implementation
technologies such as programming languages and XML. For specific guidelines, Implementation
Technology Specification (ITS) document for each target formalism should be consulted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quantities_and_ordered_numeric"><a class="anchor" href="#_quantities_and_ordered_numeric"></a>10.2. Quantities and Ordered_numeric</h3>
<div class="paragraph">
<p>In the quantity package, the type <code>Quantified</code> is shown having an abstract property of type
Ordered_numeric. This is intended to indicate that the type <code>Quantified</code> is distinguished by
the magnitude property (compared to say <code>Dv_ordered</code>, which describes ordered things without having
magnitudes). The type Ordered_numeric be mapped to various types in implementation technologies
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java: <code>java.lang.Number</code></p>
</li>
<li>
<p>C#: <code>System.IComparable</code></p>
</li>
<li>
<p>Eiffel: <code>NUMERIC</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these type systems currently suffer from not having a single type whose meaning is both
"ordered" (having the function '&lt;') and "numeric" (having the functions '+', '-', '*', '/') but in practice
it does not matter much. For type systems with no convenient supertype of the numeric concrete
types <code>Real</code>, <code>Integer</code>, <code>Double</code>, the <code><em>magnitude</em></code> property can safely be left out of <code>Quantified</code>;
the only drawback is that code cannot call <code>Quantified</code>.<code><em>magnitude</em></code> polymorphically, e.g. in a
statistical application processing <code>Quantity</code> and <code>Count</code> objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unicode"><a class="anchor" href="#_unicode"></a>10.3. Unicode</h3>
<div class="paragraph">
<p>Unicode is supported in various ways in different languages. In Java, since JDK 1.1, unicode support
is implicit in the base classes. From the documentation:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>the classes java.io.InputStreamReader, java.io.OutputStreamWriter, and
java.lang.String can convert between Unicode and a number of other character
encodings. More information is available at:
http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html.</pre>
</div>
</div>
<div class="paragraph">
<p>In the C# language, conversion can be done between Unicode and other codepages using the System.
<code>Text.UnicodeEncoding</code> (for UTF-16) and <code>System.Text.UTF8Encoding</code> (for UTF-8) classes.</p>
</div>
<div class="paragraph">
<p>In XML unicode is handled by specifying the encoding of the document in the XML declaration, e.g.
<code>&lt;?xml version="1.0" encoding="UTF-16"?&gt;</code>.</p>
</div>
<div class="paragraph">
<p>In the Eiffel language, unicode is available in the Gobo public domain library (see
<a href="http://www.gobosoft.com" class="bare">http://www.gobosoft.com</a>), in the <code>UC_STRING</code> class, which inherits from the String class.
The support in other languages varies, and may require a special type like the <code>UC_STRING</code> used in
Eiffel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates_and_times"><a class="anchor" href="#_dates_and_times"></a>10.4. Dates and Times</h3>
<div class="paragraph">
<p>In some formalisms, dates and times are represented using a single calendar-like class. This is not
considered to be good practice from the point of specification, since it is more difficult to state proper
invariants for such a class used to represent a particular logical type such as a <code>DATE</code> or <code>TIME</code>, however,
its utility in implementation is recognised.</p>
</div>
<div class="paragraph">
<p>Where implementors want to use such a class (call it <code>CALENDAR</code> here for the sake of discussion) the
recommended approach is to wrap the class <code>CALENDAR</code> with classes representing the types described
in this specification, i.e. <code>DATE</code> etc. This enables the addition of any necessary functionality in the
wrapper for example, for serialising and deserialising in and out of XML.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-05-24 13:57:36 -0600
</div>
</div>
</body>
</html>